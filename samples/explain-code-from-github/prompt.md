Explain the provided code and generate sequence and state mermaid diagrams